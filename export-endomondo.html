<a href="javascript:(function()%7Bfunction%20createURL(e%2Co)%7Be%2B%3D%22T01%253A00%253A00.000Z%22%2Co%2B%3D%22T23%253A59%253A59.000Z%22%3Bvar%20t%3D%22https%3A%2F%2Fwww.endomondo.com%2Frest%2Fv1%2Fusers%2F%22%2Buser%2B%22%2Fworkouts%3Fbefore%3D%22%2Bo%2B%22%26after%3D%22%2Be%3Breturn%20t%7Dfunction%20getUser()%7Bvar%20e%3D%2Fusers%5C%2F(.*)%5C%2Fworkouts%2F.exec(location.href)%7C%7C%5B%5D%3Breturn%202!%3De.length%3F(alert(%22User%20has%20not%20beed%20detected.%20Please%20run%20this%20bookmarklet%20from%20the%20'Training'%20page.%22)%2Cnull)%3Ae%5B1%5D%7Dfunction%20GET(e%2Co)%7Bvar%20t%3Dnew%20XMLHttpRequest%3Bt.onreadystatechange%3Dfunction()%7B4%3D%3D%3Dt.readyState%26%26o(t.responseText)%7D%2Ct.open(%22GET%22%2Ce%2C!0)%2Ct.send()%7Dfunction%20getWorkouts(e%2Co)%7BGET(e%2Cfunction(e)%7Bo(extractAllIds(JSON.parse(e)))%7D)%7Dfunction%20extractAllIds(e)%7Bfor(var%20o%3D%5B%5D%2Ct%3D0%3Be.length%3Et%3B%2B%2Bt)o.push(e%5Bt%5D.id)%3Breturn%20o%7Dfunction%20onWorkouts(e)%7Bfunction%20o(e)%7Bvar%20o%3Ddocument.createElement(%22a%22)%3Bo.innerHTML%3D%22download%20track%22%2Co.href%3D%22https%3A%2F%2Fwww.endomondo.com%2Frest%2Fv1%2Fusers%2F%22%2Buser%2B%22%2Fworkouts%2F%22%2Be%2B%22%2Fexport%3Fformat%3DGPX%22%2Co.className%3D%22endodownload%22%2Co.style.display%3D%22block%22%2Co.target%3D%22_blank%22%2Cdocument.body.appendChild(o)%7Dfor(var%20t%3D0%3Be.length%3Et%3B%2B%2Bt)o(e%5Bt%5D)%3BdownloadAll()%7Dfunction%20downloadAll()%7Bfunction%20e(o)%7Bif(0%3D%3Do.length)return%20console.log(%22download%20completed%22)%2Cvoid%200%3Bconsole.log(%22downloading%20track...s%22)%3Bvar%20t%3Do%5B0%5D%3Bt.click()%2CsetTimeout(function()%7Be(o.slice(1))%7D%2C1e3)%7Dvar%20o%3Ddocument.getElementsByClassName(%22endodownload%22)%3Be(Array.prototype.slice.call(o))%7Dvar%20user%3DgetUser()%3Bif(null!%3Duser)%7Bvar%20year%3Dwindow.prompt(%22Insert%20the%20year%20you%20want%20to%20export%20(eg.%202015)%22)%2Curl%3DcreateURL(year%2B%22-01-01%22%2Cyear%2B%22-12-31%22)%3BgetWorkouts(url%2ConWorkouts)%7D%7D)()">Export Endo mondo Tracks!</a>
